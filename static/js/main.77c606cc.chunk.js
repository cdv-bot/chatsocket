(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(20),o=a.n(r),s=(a(56),a(47)),l=a(44),m=a(21),i=a.n(m),u=a(49),f=(a(63),a(13));a(64);var d=function(e){var t=e.chatName,a=localStorage.getItem("name"),r=Object(n.useRef)(),o=Object(n.useState)(!a),s=Object(f.a)(o,2),l=s[0],m=s[1];return c.a.createElement(c.a.Fragment,null,l?c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=r.current.value;if(null===a||void 0===a?void 0:a.trim()){var n=i()(a+200);localStorage.setItem("hashcode",n),localStorage.setItem("name",a),m(!1),t(a)}}},c.a.createElement("input",{ref:r,placeholder:"Nh\u1eadp t\xean chat!!!",style:{height:"25px",width:"300px"}})):null)},b=a(50),g=a(48),h=a(45),v=a.n(h),p=a(23);a(103),a(97),a(100),a(104);p.a.initializeApp({apiKey:"AIzaSyBLYiIZfmJhkSWIigohyncxLv366h5ybLo",authDomain:"chatbox-e7b02.firebaseapp.com",projectId:"chatbox-e7b02",storageBucket:"chatbox-e7b02.appspot.com",messagingSenderId:"928490150543",appId:"1:928490150543:web:c92edca7ae2bff30e52efa",measurementId:"G-0DWJ3CWVET"}),p.a.analytics();var E=p.a;var S=function(){var e=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useRef)(null),r=Object(n.useRef)(),o=Object(n.useState)([]),s=Object(f.a)(o,2),l=s[0],m=s[1],i=Object(n.useState)(),u=Object(f.a)(i,2),d=u[0],h=u[1],p=Object(n.useState)(!1),S=Object(f.a)(p,2),j=S[0],O=S[1];return Object(n.useEffect)((function(){return t.current=v.a.connect("https://webchatsokket.herokuapp.com"),t.current.on("message",(function(e){var t=e.name,a=e.message;m([].concat(Object(g.a)(l),[{name:t,message:a}])),c.current.scrollIntoView()})),function(){return t.current.disconnect()}}),[d,l]),Object(n.useEffect)((function(){var e=localStorage.getItem("hashcode");E.database().ref("sentloading").on("value",(function(t){var a=Object(b.a)({},t.val());delete a[e],Object.values(a).includes(!0)?O(!0):O(!1)}))})),{content:l,onMessageSubmit:function(e){e.preventDefault();var n=localStorage.getItem("name"),c=a.current.value;t.current.emit("message",{name:n,message:c}),a.current.value=""},setChatName:h,onTextChange:function(e){var t=localStorage.getItem("hashcode");E.database().ref("sentloading/".concat(t)).set(!0),r.current&&clearTimeout(r.current),r.current=setTimeout((function(){E.database().ref("sentloading/".concat(t)).set(!1)}),500)},refMessage:a,refLoading:j,setRefLoading:O,refScroll:c}}(),t=e.content,a=e.setChatName,r=e.onMessageSubmit,o=e.onTextChange,m=e.refMessage,h=e.refLoading,p=e.refScroll;return Object(n.useEffect)((function(){var e=localStorage.getItem("hashcode"),t=localStorage.getItem("name");e!==i()(t+200)&&(console.log("lan"),localStorage.clear())}),[]),c.a.createElement("div",{className:"render-chat"},c.a.createElement("div",{className:"name-field"},c.a.createElement(d,{chatName:a})),c.a.createElement("div",{className:"bd_chat"},c.a.createElement("div",{className:"box-chat"},t.map((function(e,t){var a=e.name,n=e.message;return c.a.createElement("div",{key:t,className:"item-chat"},c.a.createElement("p",{className:"name"},a,":"),c.a.createElement("p",{className:"textchat"},n))})),c.a.createElement("div",{ref:p,style:{color:"white"}}),h&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{class:"chat-bubble"},c.a.createElement("div",{class:"typing"},c.a.createElement("div",{class:"dot"}),c.a.createElement("div",{class:"dot"}),c.a.createElement("div",{class:"dot"}))))),c.a.createElement("form",{onSubmit:r,className:"form_bt"},c.a.createElement("input",{className:"input_sent",name:"message",ref:m,onChange:function(e){return o(e)},autoComplete:"off"}),c.a.createElement("button",{className:"bt"},c.a.createElement(l.a,{icon:s.a})))),c.a.createElement(u.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a(102)},56:function(e,t,a){},63:function(e,t,a){},94:function(e,t){}},[[51,1,2]]]);
//# sourceMappingURL=main.77c606cc.chunk.js.map